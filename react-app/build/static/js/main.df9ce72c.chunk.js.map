{"version":3,"sources":["resources/north-west-gate.jpg","resources/north-east-gate.jpg","resources/north-gate.jpg","resources/west-gate.jpg","resources/central-gate.jpg","resources/east-gate.jpg","resources/south-west-gate.jpg","resources/south-gate.jpg","resources/south-east-gate.jpg","resources/full-map.jpg","components/Services/Logger.js","components/Services/Services.js","components/Login/Login.js","components/Services/Storage.js","components/UploadFileButton/UploadFileButton.js","components/DiceRollResult/DiceRollRestult.js","components/UserRolls/UserRolls.js","components/UserSection/UserSection.js","components/DiceRoller/DiceRoller.js","components/Utils/Utils.js","components/CharacterFeature/CharacterFeature.js","components/CharacterSheetContainer/CharacterSheetContainer.js","components/PanelLeft/PanelLeft.js","components/BaseMap/BaseMap.js","components/MapLayer/MapLayer.js","components/BaldursGateMaps/BaldursGateMaps.js","components/FreeDraw/FreeDraw.js","components/NoteSection/NoteSection.js","components/PanelCenter/PanelCenter.js","components/PanelRight/PanelRight.js","components/Home/Home.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Logger","instance","this","componentName","constructor","name","args","splice","console","log","apply","error","Services","socket","io","connect","key","callback","logger","on","data","emit","subscribe","url","Promise","resolve","reject","fetch","method","headers","body","JSON","stringify","then","response","status","json","Error","catch","e","Login","props","state","username","password","onSubmit","bind","logout","preventDefault","doPost","type","id","onLoginSuccess","onLogoutSuccess","user","className","onClick","placeholder","value","onChange","setState","target","Component","Storage","store","contains","parse","getItem","setItem","removeItem","hasOwnProperty","localStorage","UploadFileButton","onChangeFile","input","click","file","files","title","window","prompt","fileReader","FileReader","onload","src","result","alt","readAsDataURL","children","ref","DiceRollResult","first","roll","number","bonus","UserRolls","rolls","length","map","item","index","UserSection","onClickImage","image","DiceRoller","values","onChangeDiceValue","onChangeDiceNumber","onChangeDiceBonus","Number","i","Math","floor","random","onRoll","min","selected","Utils","CharacterFeature","label","getFeatureBonus","CharacterSheetContainer","character","features","extra","setText","saveText","clearText","setFeature","saveFeatures","save","feat","find","onInput","PanelLeft","BaseMap","onLoad","onImageLoad","MapLayer","r1","r2","density","overlay","baseMapImage","onMouseMove","onMouseDown","onMouseUp","getDataImage","restoreFog","sendImage","showMap","contextFog","canvasFog","getContext","addEventListener","touches","clientX","clientY","event","MouseEvent","width","height","fillStyle","fillRect","globalCompositeOperation","restoreCanvas","document","createElement","restoreContext","drawImage","onSendImage","isRemoveFog","pX","pY","getMapRadialGradient","radGrd","createRadialGradient","addColorStop","isShowAllMap","canvasPrint","contextPrint","toDataURL","initContextMap","actions","BaldursGateMaps","fullMap","list","northWestGate","northGate","northEastGate","westGate","centralGate","eastGate","southWestGate","southGate","southEastGate","onMapSelected","FreeDraw","isDrawEnabled","prevX","currX","prevY","currY","color","lineWidth","drawMode","setColor","resetCanvas","onMouseOut","canvas","offsetLeft","offsetTop","deltaX","deltaY","canvasContext","scrollX","scrollY","parseInt","beginPath","strokeStyle","moveTo","lineTo","lineJoin","lineCap","stroke","colorChooser","NoteSection","onSaveText","onClearText","content","PanelCenter","sourceImage","sourceAlt","masterTool","PanelRight","users","enlargePanelRight","u","Home","sessionStorage","sendRoll","uploadImage","setBaseMap","togglePanelRight","updateUsers","init","onImage","onJoin","onLeave","publish","remove","App","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.df9ce72c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/north-west-gate.1fb9d39e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/north-east-gate.54300b9a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/north-gate.a2e473f2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/west-gate.7e955c33.jpg\";","module.exports = __webpack_public_path__ + \"static/media/central-gate.f33b04f9.jpg\";","module.exports = __webpack_public_path__ + \"static/media/east-gate.7b6ef059.jpg\";","module.exports = __webpack_public_path__ + \"static/media/south-west-gate.ff6decff.jpg\";","module.exports = __webpack_public_path__ + \"static/media/south-gate.25ae3350.jpg\";","module.exports = __webpack_public_path__ + \"static/media/south-east-gate.04dfecff.jpg\";","module.exports = __webpack_public_path__ + \"static/media/full-map.a7fcd8c7.jpg\";","export default class Logger {\n\n\tconstructor(instance) {\n\t\tthis.componentName = typeof instance === \"string\" ? instance : instance.constructor.name;\n\t}\n\n\tlog(...args) {\n\t\targs.splice(0, 0, \"-\");\n\t\targs.splice(0, 0, this.componentName);\n\t\tconsole.log.apply(console, args)\n\t};\n\n\terror(...args) {\n\t\targs.splice(0, 0, \"-\");\n\t\targs.splice(0, 0, this.componentName);\n\t\tconsole.error.apply(console, args)\n\t}\n}\n","import io from \"socket.io-client\";\nimport Logger from \"./Logger\";\n\nexport default class Services {\n\n\tstatic socket;\n\tstatic logger = new Logger(\"Services\");\n\n\tstatic init() {\n\t\tif (!this.socket) {\n\t\t\tthis.socket = io.connect();\n\t\t}\n\t\treturn this.socket;\n\t}\n\n\tstatic subscribe(key, callback) {\n\t\tthis.logger.log(\"Subscribing event\", key);\n\t\tthis.socket.on(key, data => {\n\t\t\tthis.logger.log(\"Receiving data event for\", key, data);\n\t\t\tcallback(data)\n\t\t});\n\t}\n\n\tstatic publish(key, data) {\n\t\tthis.logger.log(\"Emitting event\", key, data);\n\t\tthis.socket.emit(key, data);\n\t}\n\n\tstatic onRoll(callback) {\n\t\tthis.subscribe(\"roll\", callback);\n\t}\n\n\tstatic onLeave(callback) {\n\t\tthis.subscribe(\"leave\", callback);\n\t}\n\n\tstatic onJoin(callback) {\n\t\tthis.subscribe(\"join\", callback);\n\t}\n\n\tstatic onImage(callback) {\n\t\tthis.subscribe(\"image\", callback);\n\t}\n\n\tstatic doPost(url, data) {\n\t\tthis.logger.log(\"Submitting data\", url, data);\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tfetch(url, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify(data)\n\t\t\t}).then(response => {\n\t\t\t\tthis.logger.log(\"Reading response for url\", url, response);\n\t\t\t\tif (response.status === 200) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t}\n\t\t\t\tthrow new Error(response.status);\n\t\t\t}).then(data => resolve(data))\n\t\t\t\t.catch(e => {\n\t\t\t\t\tthis.logger.error(e);\n\t\t\t\t\treject(e)\n\t\t\t\t});\n\t\t})\n\t}\n}\n","import React, {Component} from \"react\";\nimport Logger from \"../Services/Logger\";\nimport \"./Login.css\";\nimport Services from \"../Services/Services\";\n\nexport default class Login extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.logger = new Logger(\"Login\");\n\t\tthis.state = {\n\t\t\tusername: \"\",\n\t\t\tpassword: \"\"\n\t\t};\n\t\tthis.onSubmit = this.onSubmit.bind(this);\n\t\tthis.logout = this.logout.bind(this);\n\t}\n\n\tonSubmit(e) {\n\t\te.preventDefault();\n\t\tServices.doPost(\"/login\", this.state).then(data => {\n\t\t\tdata = {type: data.type, id: this.state.username};\n\t\t\tthis.logger.log(\"Login success\", data);\n\t\t\tthis.props.onLoginSuccess && this.props.onLoginSuccess(data);\n\t\t}).catch(() => this.logger.error(\"Failed to login\"))\n\t}\n\n\tlogout(e) {\n\t\tthis.logger.log(\"Logging out\");\n\t\tthis.props.onLogoutSuccess && this.props.onLogoutSuccess()\n\t}\n\n\trender() {\n\t\tconst {username, password} = this.state;\n\t\tconst {user} = this.props;\n\t\tif (user) {\n\t\t\treturn (\n\t\t\t\t<div className={\"component-login user-login\"}>\n\t\t\t\t\t<button className={\"clear\"} onClick={this.logout}>Logout</button>\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t\treturn (\n\t\t\t<div className={\"component-login user-logout\"}>\n\t\t\t\t<form onSubmit={this.onSubmit}>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input placeholder={\"Username\"} value={username} onChange={e => this.setState({username: e.target.value})}/>\n\t\t\t\t\t</label>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input placeholder={\"Password\"} value={password} onChange={e => this.setState({password: e.target.value})}/>\n\t\t\t\t\t</label>\n\t\t\t\t\t<input className={\"save\"} type={\"submit\"} value={\"Login\"}/>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","export default class Storage {\n\n\tstatic store = localStorage;\n\n\tstatic set storage(target) {\n\t\tthis.store = target;\n\t}\n\n\tstatic get storage() {\n\t\treturn this.store;\n\t}\n\n\tstatic getItem(key, store) {\n\t\tif (!this.contains(key, store)) {\n\t\t\treturn null;\n\t\t}\n\t\tstore = store || this.store;\n\t\treturn JSON.parse(store.getItem(key))\n\t}\n\n\tstatic save(key, value, store) {\n\t\tstore = store || this.store;\n\t\tstore.setItem(key, JSON.stringify(value))\n\t}\n\n\tstatic remove(key, store) {\n\t\tstore = store || this.store;\n\t\tstore.removeItem(key)\n\t}\n\n\tstatic contains(key, store) {\n\t\tstore = store || this.store;\n\t\treturn store.hasOwnProperty(key)\n\t}\n}\n","import React, {Component} from \"react\";\nimport \"./UploadFileButton.css\";\n\nexport default class UploadFileButton extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.onClick = this.onClick.bind(this);\n\t\tthis.onChangeFile = this.onChangeFile.bind(this);\n\t}\n\n\tonClick() {\n\t\tthis.input.click();\n\t}\n\n\tonChangeFile(e) {\n\t\tconst file = e.target.files[0];\n\t\tconst title = window.prompt(\"Set image title\");\n\t\t// FileReader support\n\t\tconst fileReader = new FileReader();\n\t\tfileReader.onload = () => {\n\t\t\tthis.props.onChange && this.props.onChange({\n\t\t\t\tsrc: fileReader.result,\n\t\t\t\talt: title\n\t\t\t});\n\t\t};\n\t\tfileReader.readAsDataURL(file);\n\t}\n\n\trender() {\n\t\tconst {children} = this.props;\n\t\treturn (\n\t\t\t<button className={\"upload-file\"} onClick={this.onClick}>\n\t\t\t\t<span>{children}</span>\n\t\t\t\t<input ref={ref => this.input = ref} type={\"file\"} onChange={this.onChangeFile}/>\n\t\t\t</button>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport \"./DiceRollResult.css\";\n\nconst DiceRollResult = props =>\n\t<div className={`dice-roll-result ${props.first}`}>\n\t\t<span className={\"dice number\"}>{props.roll.number}</span>\n\t\t<span className={\"dice operator\"}>d(</span>\n\t\t<span className={\"dice value\"}>{props.roll.value}</span>\n\t\t<span className={\"dice operator\"}>) + </span>\n\t\t<span className={\"dice bonus\"}>{props.roll.bonus}</span>\n\t\t<span className={\"dice operator\"}> = </span>\n\t\t<span className={\"dice roll\"}>{props.roll.result}</span>\n\t</div>\n;\n\nexport default DiceRollResult;\n","import React, {Component} from \"react\";\nimport \"./UserRolls.css\";\nimport DiceRollResult from \"../DiceRollResult/DiceRollRestult\";\nimport Logger from \"../Services/Logger\";\n\nexport default class UserRolls extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.logger = new Logger(\"UserRolls\");\n\t}\n\n\trender() {\n\t\tconst {rolls} = this.props;\n\t\tthis.logger.log(\"rolls\", rolls);\n\t\tif (rolls && rolls.length) {\n\t\t\treturn (\n\t\t\t\t<div className={\"user-rolls\"}>\n\t\t\t\t\t<label>Rolls</label>\n\t\t\t\t\t{rolls.map((item, index) => <DiceRollResult key={index} roll={item} first={(index === 0) ? \"first\" : \"\"}/>)}\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t\treturn null\n\t}\n}\n","import React, {Component} from \"react\";\nimport \"./UserSection.css\";\nimport UserRolls from \"../UserRolls/UserRolls\";\nimport Logger from \"../Services/Logger\";\n\nexport default class UserSection extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.logger = new Logger(\"UserSection\");\n\t\tthis.onClickImage = this.onClickImage.bind(this);\n\t}\n\n\tonClickImage() {\n\t\tthis.props.onClickImage && this.props.onClickImage();\n\t}\n\n\trender() {\n\t\tconst {user} = this.props;\n\t\tthis.logger.log(\"user\", user);\n\t\treturn (\n\t\t\t<div className={`user-section section-${user.id}`}>\n\t\t\t\t<fieldset>\n\t\t\t\t\t<legend>{user.id}</legend>\n\t\t\t\t\t<UserRolls rolls={user.rolls}/>\n\t\t\t\t\t{user.image ? <img alt={`Remote ${user.id}`} src={user.image} onClick={this.onClickImage}/> : null}\n\t\t\t\t</fieldset>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, {Component} from \"react\";\nimport \"./DiceRoller.css\";\nimport Logger from \"../Services/Logger\";\nimport UserRolls from \"../UserRolls/UserRolls\";\n\nexport default class DiceRoller extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.logger = new Logger(\"DiceRoller\");\n\t\tthis.state = {\n\t\t\tvalue: 20,\n\t\t\tnumber: 1,\n\t\t\tbonus: 0,\n\t\t};\n\t\tthis.values = [4, 6, 8, 10, 12, 20, 100];\n\t\tthis.onChangeDiceValue = this.onChangeDiceValue.bind(this);\n\t\tthis.onChangeDiceNumber = this.onChangeDiceNumber.bind(this);\n\t\tthis.onChangeDiceBonus = this.onChangeDiceBonus.bind(this);\n\t\tthis.result = this.result.bind(this);\n\t}\n\n\tonChangeDiceValue(e) {\n\t\tconst {value} = e.target;\n\t\tthis.setState({value: Number(value)})\n\t}\n\n\tonChangeDiceNumber(e) {\n\t\tconst {value} = e.target;\n\t\tthis.setState({number: Number(value)})\n\t}\n\n\tonChangeDiceBonus(e) {\n\t\tconst {value} = e.target;\n\t\tthis.setState({bonus: Number(value)})\n\t}\n\n\tresult() {\n\t\tconst {value, number, bonus} = this.state;\n\t\tlet result = 0;\n\t\tfor (let i = 0; i < number; i++) {\n\t\t\tresult += Math.floor(Math.random() * value) + 1;\n\t\t}\n\t\tresult += bonus;\n\t\tthis.props.onRoll && this.props.onRoll({value, number, bonus, result})\n\t}\n\n\trender() {\n\t\tconst {value, number, bonus} = this.state;\n\t\tconst rolls = this.props.rolls || [];\n\t\treturn (\n\t\t\t<div className={\"dice-roller\"}>\n\t\t\t\t<div className={\"inputs\"}>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<span>Number</span>\n\t\t\t\t\t\t<input type={\"number\"} min={1} value={number} onChange={this.onChangeDiceNumber}/>\n\t\t\t\t\t</label>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<span>Type</span>\n\t\t\t\t\t\t<select onChange={this.onChangeDiceValue}>\n\t\t\t\t\t\t\t{this.values.map((item, index) => <option key={index} value={item} selected={item === value}>{item}</option>)}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</label>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<span>Bonus</span>\n\t\t\t\t\t\t<input type={\"number\"} min={0} value={bonus} onChange={this.onChangeDiceBonus}/>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div className={\"button\"}>\n\t\t\t\t\t<button className={\"save\"} onClick={this.result}>Roll</button>\n\t\t\t\t</div>\n\t\t\t\t<UserRolls rolls={rolls}/>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","export default class Utils {\n\n\tstatic getFeatureBonus(value) {\n\t\treturn value ? Math.floor((value - 10) / 2) : null;\n\t}\n}\n","import React, {Component} from \"react\";\nimport \"./CharacterFeature.css\";\nimport Utils from \"../Utils/Utils\";\n\nexport default class CharacterFeature extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tvalue: \"\"\n\t\t};\n\t\tthis.onChange = this.onChange.bind(this);\n\t}\n\n\tonChange(e) {\n\t\tconst {value} = e.target;\n\t\tconst bonus = Math.floor((value - 10) / 2);\n\t\tthis.setState({value, bonus});\n\t\tthis.props.onChange && this.props.onChange({\n\t\t\tid: this.props.id,\n\t\t\tvalue\n\t\t});\n\t}\n\n\tcomponentDidMount() {\n\t\tconst value = this.props.value || 10;\n\t\tthis.setState({value});\n\t}\n\n\trender() {\n\t\tconst {id, label} = this.props;\n\t\tconst {value} = this.state;\n\t\tconst bonus = Utils.getFeatureBonus(value);\n\t\treturn (\n\t\t\t<label className={`character-feature ${id}`}>\n\t\t\t\t<label>{id}</label>\n\t\t\t\t<input type={\"number\"} min={1} placeholder={label} value={value} onChange={this.onChange}/>\n\t\t\t\t<span>{bonus}</span>\n\t\t\t</label>\n\t\t)\n\t}\n}\n","import React, {Component} from \"react\";\nimport \"./CharacterSheetContainer.css\";\nimport Storage from \"../Services/Storage\";\nimport CharacterFeature from \"../CharacterFeature/CharacterFeature\";\n\nexport default class CharacterSheetContainer extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcharacter: Storage.getItem(\"character\") || {\n\t\t\t\tfeatures: [\n\t\t\t\t\t{id: \"str\", label: \"Strength\"},\n\t\t\t\t\t{id: \"dex\", label: \"Dexterity\"},\n\t\t\t\t\t{id: \"con\", label: \"Constitution\"},\n\t\t\t\t\t{id: \"int\", label: \"Intelligence\"},\n\t\t\t\t\t{id: \"wis\", label: \"Wisdom\"},\n\t\t\t\t\t{id: \"cha\", label: \"Charisma\"},\n\t\t\t\t],\n\t\t\t\textra: \"\"\n\t\t\t}\n\t\t};\n\t\tthis.setText = this.setText.bind(this);\n\t\tthis.saveText = this.saveText.bind(this);\n\t\tthis.clearText = this.clearText.bind(this);\n\t\tthis.setFeature = this.setFeature.bind(this);\n\t\tthis.saveFeatures = this.saveFeatures.bind(this);\n\t}\n\n\tsetText() {\n\t\tconst {value} = this.extra;\n\t\tconst {character} = this.state;\n\t\tcharacter.extra = value;\n\t\tthis.setState({character});\n\t}\n\n\tsaveText() {\n\t\tconst {value} = this.extra;\n\t\tconst character = this.state;\n\t\tcharacter.extra = value;\n\t\tStorage.save(\"character\", character);\n\t}\n\n\tclearText(e) {\n\t\tthis.extra.value = \"\"\n\t}\n\n\tsetFeature(feat) {\n\t\tconst {features} = this.state.character;\n\t\tfeatures.find(item => item.id === feat.id).value = feat.value;\n\t\tStorage.save(\"character\", this.state.character);\n\t}\n\n\tsaveFeatures() {}\n\n\trender() {\n\t\tconst {extra, features} = this.state.character;\n\t\treturn (\n\t\t\t<div className={\"character-sheet\"}>\n\t\t\t\t<label>Character</label>\n\t\t\t\t<div className={\"features\"}>\n\t\t\t\t\t{features.map((item, index) => {\n\t\t\t\t\t\tconst {id, label, value} = item;\n\t\t\t\t\t\treturn (<CharacterFeature key={index} id={id} label={label} value={value} onChange={this.setFeature}/>)\n\t\t\t\t\t})}\n\t\t\t\t\t<button className={\"save\"}>Save</button>\n\t\t\t\t</div>\n\t\t\t\t<textarea value={extra} onInput={this.setText} ref={ref => this.extra = ref}/>\n\t\t\t\t<button className={\"clear\"} onClick={this.clearText}>Clear</button>\n\t\t\t\t<button className={\"save\"} onClick={this.saveText}>Save</button>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React, {Component} from \"react\";\nimport DiceRoller from \"../DiceRoller/DiceRoller\";\nimport CharacterSheetContainer from \"../CharacterSheetContainer/CharacterSheetContainer\";\n\nexport default class PanelLeft extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.onRoll = this.onRoll.bind(this);\n\t}\n\n\tonRoll(roll) {\n\t\tthis.props.onRoll && this.props.onRoll(roll);\n\t}\n\n\trender() {\n\t\tconst {user} = this.props;\n\t\treturn (\n\t\t\t<div className={\"panel panel-left\"}>\n\t\t\t\t<DiceRoller onRoll={this.onRoll} rolls={user.rolls}/>\n\t\t\t\t{user.type === \"player\" ?\n\t\t\t\t\t<CharacterSheetContainer/>\n\t\t\t\t\t: null}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nconst BaseMap = props => <img alt={props.alt} src={props.src} onLoad={e => props.onImageLoad(e.target)}/>;\n\nexport default BaseMap;\n","import React, {Component} from \"react\";\nimport Logger from \"../Services/Logger\";\nimport BaseMap from \"../BaseMap/BaseMap\";\nimport \"./MapLayer.css\";\n\nexport default class MapLayer extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.logger = new Logger(\"MapLayer\");\n\t\tthis.r1 = 30;\n\t\tthis.r2 = 100;\n\t\tthis.density = .4;\n\t\tthis.overlay = 'rgba( 0, 0, 0, 1 )';\n\t\tthis.baseMapImage = null;\n\n\t\tthis.onMouseMove = this.onMouseMove.bind(this);\n\t\tthis.onMouseDown = this.onMouseDown.bind(this);\n\t\tthis.onMouseUp = this.onMouseUp.bind(this);\n\t\tthis.getDataImage = this.getDataImage.bind(this);\n\t\tthis.onImageLoad = this.onImageLoad.bind(this);\n\t\tthis.restoreFog = this.restoreFog.bind(this);\n\t\tthis.sendImage = this.sendImage.bind(this);\n\t\tthis.showMap = this.showMap.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.contextFog = this.canvasFog.getContext(\"2d\");\n\n\t\tthis.canvasFog.addEventListener(\"touchstart\", e => {\n\t\t\t// mousePos = getTouchPos(this.canvasFog, e);\n\t\t\tconst {clientX, clientY} = e.touches[0];\n\t\t\tconst event = new MouseEvent(\"mousedown\", {clientX, clientY});\n\t\t\tthis.onMouseDown(event);\n\t\t}, false);\n\n\t\tthis.canvasFog.addEventListener(\"touchend\", e => {\n\t\t\tconst event = new MouseEvent(\"mouseup\", {});\n\t\t\tthis.onMouseUp(event);\n\t\t}, false);\n\n\t\tthis.canvasFog.addEventListener(\"touchmove\", e => {\n\t\t\tconst {clientX, clientY} = e.touches[0];\n\t\t\tconst event = new MouseEvent(\"mousemove\", {clientX, clientY});\n\t\t\tthis.onMouseMove(event);\n\t\t}, false);\n\t}\n\n\tinitContextMap() {\n\t\tconst {width, height} = this.canvasFog;\n\t\tthis.logger.log(\"Initializing Fog...\", width, height);\n\t\t// black out the canvas\n\t\tthis.contextFog.fillStyle = this.overlay;\n\t\tthis.contextFog.fillRect(0, 0, width, height);\n\t\t// set up our \"eraser\"\n\t\tthis.contextFog.globalCompositeOperation = 'destination-out';\n\n\t\tthis.restoreCanvas = document.createElement(\"canvas\");\n\t\tthis.restoreCanvas.width = width;\n\t\tthis.restoreCanvas.height = height;\n\t\tthis.restoreContext = this.restoreCanvas.getContext(\"2d\");\n\t\tthis.restoreContext.drawImage(this.canvasFog, 0, 0);\n\t}\n\n\trestoreFog() {\n\t\tthis.contextFog.globalCompositeOperation = \"source-over\";\n\t\tthis.contextFog.drawImage(this.restoreCanvas, 0, 0);\n\t\tthis.contextFog.globalCompositeOperation = \"destination-out\";\n\t}\n\n\tsendImage() {\n\t\tconst image = this.getDataImage();\n\t\tthis.props.onSendImage && this.props.onSendImage(image);\n\t}\n\n\tshowMap() {\n\t\tconst {width, height} = this.canvasFog;\n\t\tthis.contextFog.fillStyle = this.overlay;\n\t\tthis.contextFog.fillRect(0, 0, width, height);\n\t};\n\n\tonMouseDown(e) {\n\t\te.preventDefault();\n\t\tthis.isRemoveFog = true;\n\t}\n\n\tonMouseUp(e) {\n\t\te.preventDefault();\n\t\tthis.isRemoveFog = false;\n\t}\n\n\tonMouseMove(e) {\n\t\te.preventDefault();\n\t\tif (this.isRemoveFog) {\n\t\t\tconst pX = e.clientX, pY = e.clientY - this.r2;\n\t\t\t// reveal wherever we drag\n\t\t\tthis.contextFog.fillStyle = this.getMapRadialGradient(pX, pY);\n\t\t\tthis.contextFog.fillRect(pX - this.r2, pY - this.r2, this.r2 * 2, this.r2 * 2);\n\t\t}\n\t}\n\n\tgetMapRadialGradient(pX, pY) {\n\t\tconst radGrd = this.contextFog.createRadialGradient(pX, pY, this.r1, pX, pY, this.r2);\n\t\tradGrd.addColorStop(0, 'rgba( 0, 0, 0,  1 )');\n\t\tradGrd.addColorStop(this.density, 'rgba( 0, 0, 0, .1 )');\n\t\tradGrd.addColorStop(1, 'rgba( 0, 0, 0,  0 )');\n\t\treturn radGrd;\n\t}\n\n\tgetDataImage(isShowAllMap) {\n\t\tconst canvasPrint = document.createElement(\"canvas\");\n\t\tcanvasPrint.width = this.canvasFog.width;\n\t\tcanvasPrint.height = this.canvasFog.height;\n\t\tconst contextPrint = canvasPrint.getContext(\"2d\");\n\t\tcontextPrint.drawImage(this.baseMapImage, 0, 0, this.baseMapImage.width, this.baseMapImage.height, 0, 0, this.canvasFog.width, this.canvasFog.height);\n\t\tif (!isShowAllMap) {\n\t\t\tcontextPrint.drawImage(this.canvasFog, 0, 0);\n\t\t}\n\t\tthis.restoreContext.drawImage(canvasPrint, 0, 0);\n\t\treturn canvasPrint.toDataURL('image/png');\n\t}\n\n\tonImageLoad(image) {\n\t\tthis.baseMapImage = image;\n\t\tconst {width, height} = image;\n\t\tthis.canvasFog.width = width;\n\t\tthis.canvasFog.height = height;\n\t\tthis.initContextMap();\n\t}\n\n\trender() {\n\t\tconst {image, alt} = this.props;\n\t\treturn (\n\t\t\t<div className={\"map-layer\"}>\n\t\t\t\t<div className={\"actions\"} ref={ref => this.actions = ref}>\n\t\t\t\t\t<span>{alt}</span>\n\t\t\t\t\t<button onClick={this.restoreFog}>Cancel</button>\n\t\t\t\t\t<button onClick={this.sendImage}>Send</button>\n\t\t\t\t\t<button onClick={this.showMap}>Show Map</button>\n\t\t\t\t</div>\n\t\t\t\t<div className={\"map-container\"}>\n\t\t\t\t\t<BaseMap alt={alt} src={image} onImageLoad={this.onImageLoad}/>\n\t\t\t\t\t<canvas id={\"canvas-fog\"} ref={ref => this.canvasFog = ref} onMouseDown={this.onMouseDown} onMouseUp={this.onMouseUp} onMouseMove={this.onMouseMove}/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React, {Component} from \"react\";\nimport northWestGate from \"../../resources/north-west-gate.jpg\";\nimport northEastGate from \"../../resources/north-east-gate.jpg\";\nimport northGate from \"../../resources/north-gate.jpg\";\nimport westGate from \"../../resources/west-gate.jpg\";\nimport centralGate from \"../../resources/central-gate.jpg\";\nimport eastGate from \"../../resources/east-gate.jpg\";\nimport southWestGate from \"../../resources/south-west-gate.jpg\";\nimport southGate from \"../../resources/south-gate.jpg\";\nimport southEastGate from \"../../resources/south-east-gate.jpg\";\nimport fullMap from \"../../resources/full-map.jpg\";\nimport \"./BaldursGateMaps.css\";\n\nexport default class BaldursGateMaps extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.fullMap = {alt: \"Full Map\", src: fullMap};\n\t\tthis.list = [\n\t\t\t{alt: \"North West Gate\", src: northWestGate},\n\t\t\t{alt: \"North Gate\", src: northGate},\n\t\t\t{alt: \"North Est Gate\", src: northEastGate},\n\t\t\t{alt: \"West Gate\", src: westGate},\n\t\t\t{alt: \"Central Gate\", src: centralGate},\n\t\t\t{alt: \"Est Gate\", src: eastGate},\n\t\t\t{alt: \"South West Gate\", src: southWestGate},\n\t\t\t{alt: \"South Gate\", src: southGate},\n\t\t\t{alt: \"South East Gate\", src: southEastGate}\n\t\t];\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={\"map-list\"}>\n\t\t\t\t<ul>\n\t\t\t\t\t{this.list.map((item, index) =>\n\t\t\t\t\t\t<li key={index} onClick={() => this.props.onMapSelected(item)}>\n\t\t\t\t\t\t\t<img id={`map-${index}`} alt={item.alt} src={item.src}/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t</ul>\n\t\t\t\t<img alt={this.fullMap.alt} src={this.fullMap.src}/>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React, {Component} from \"react\";\nimport \"./FreeDraw.css\";\n\nexport default class FreeDraw extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.isDrawEnabled = false;\n\t\tthis.prevX = 0;\n\t\tthis.currX = 0;\n\t\tthis.prevY = 0;\n\t\tthis.currY = 0;\n\t\tthis.color = \"black\";\n\t\tthis.lineWidth = 10;\n\t\tthis.drawMode = \"draw\";\n\t\tthis.setColor = this.setColor.bind(this);\n\t\tthis.resetCanvas = this.resetCanvas.bind(this);\n\t\tthis.sendImage = this.sendImage.bind(this);\n\t\tthis.onMouseMove = this.onMouseMove.bind(this);\n\t\tthis.onMouseDown = this.onMouseDown.bind(this);\n\t\tthis.onMouseUp = this.onMouseUp.bind(this);\n\t\tthis.onMouseOut = this.onMouseOut.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\n\t\tthis.canvas.width = 1024;//window.innerWidth - 20;\n\t\tthis.canvas.height = 768;//window.innerHeight - 100;\n\n\t\tconst {offsetLeft, offsetTop} = this.canvas;\n\n\t\tthis.deltaX = offsetLeft;\n\t\tthis.deltaY = offsetTop;\n\n\t\tthis.canvasContext = this.canvas.getContext(\"2d\");\n\t}\n\n\tonMouseOut(e) {\n\t\tthis.isDrawEnabled = false;\n\t}\n\n\tonMouseUp(e) {\n\t\tthis.isDrawEnabled = false;\n\t}\n\n\tonMouseDown(e) {\n\t\tconst {scrollX, scrollY} = window;\n\t\tthis.prevX = this.currX = parseInt(e.clientX - this.deltaX + scrollX);\n\t\tthis.prevY = this.currY = parseInt(e.clientY - this.deltaY + scrollY);\n\t\tthis.isDrawEnabled = true;\n\t}\n\n\tonMouseMove(e) {\n\t\tconst {scrollX, scrollY} = window;\n\t\tthis.currX = parseInt(e.clientX - this.deltaX + scrollX);\n\t\tthis.currY = parseInt(e.clientY - this.deltaY + scrollY);\n\t\tif (this.isDrawEnabled) {\n\t\t\tthis.canvasContext.beginPath();\n\t\t\tif (this.drawMode === 'draw') {\n\t\t\t\tthis.canvasContext.globalCompositeOperation = 'source-over';\n\t\t\t\tthis.canvasContext.strokeStyle = this.color;\n\t\t\t\tthis.canvasContext.lineWidth = this.lineWidth;\n\t\t\t} else {\n\t\t\t\tthis.canvasContext.globalCompositeOperation = 'destination-out';\n\t\t\t\tthis.canvasContext.lineWidth = Number(this.lineWidth) * 3;\n\t\t\t}\n\t\t\tthis.canvasContext.moveTo(this.prevX, this.prevY);\n\t\t\tthis.canvasContext.lineTo(this.currX, this.currY);\n\t\t\tthis.canvasContext.lineJoin = this.canvasContext.lineCap = 'round';\n\t\t\tthis.canvasContext.stroke();\n\t\t\tthis.prevX = this.currX;\n\t\t\tthis.prevY = this.currY;\n\t\t}\n\t}\n\n\tsetColor(e) {\n\t\tthis.drawMode = \"draw\";\n\t\tconst {className} = e.target;\n\t\tswitch (className) {\n\t\t\tcase \"green\":\n\t\t\t\tthis.color = \"green\";\n\t\t\t\tbreak;\n\t\t\tcase \"blue\":\n\t\t\t\tthis.color = \"blue\";\n\t\t\t\tbreak;\n\t\t\tcase \"red\":\n\t\t\t\tthis.color = \"red\";\n\t\t\t\tbreak;\n\t\t\tcase \"yellow\":\n\t\t\t\tthis.color = \"yellow\";\n\t\t\t\tbreak;\n\t\t\tcase \"orange\":\n\t\t\t\tthis.color = \"orange\";\n\t\t\t\tbreak;\n\t\t\tcase \"white\":\n\t\t\t\tthis.color = \"white\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.color = \"black\";\n\t\t}\n\t}\n\n\tresetCanvas() {\n\t\tconst {width, height} = this.canvas;\n\t\tthis.canvasContext.fillStyle = \"white\";\n\t\tthis.canvasContext.fillRect(0, 0, width, height);\n\t\tthis.canvasContext.globalCompositeOperation = 'source-over';\n\t}\n\n\tgetDataImage() {\n\t\tconst canvasPrint = document.createElement(\"canvas\");\n\t\tcanvasPrint.width = this.canvas.width;\n\t\tcanvasPrint.height = this.canvas.height;\n\t\tconst contextPrint = canvasPrint.getContext(\"2d\");\n\t\tcontextPrint.drawImage(this.canvas, 0, 0);\n\t\treturn canvasPrint.toDataURL('image/png');\n\t}\n\n\tsendImage() {\n\t\tconst image = this.getDataImage();\n\t\tthis.props.onSendImage && this.props.onSendImage(image);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={\"free-draw\"}>\n\t\t\t\t<canvas ref={ref => this.canvas = ref} onMouseMove={this.onMouseMove} onMouseDown={this.onMouseDown} onMouseUp={this.onMouseUp} onMouseOut={this.onMouseOut}/>\n\t\t\t\t<div className={\"color-chooser\"} ref={ref => this.colorChooser = ref}>\n\t\t\t\t\t<button className={\"green\"} onClick={this.setColor}>Green</button>\n\t\t\t\t\t<button className={\"blue\"} onClick={this.setColor}>Blue</button>\n\t\t\t\t\t<button className={\"red\"} onClick={this.setColor}>Red</button>\n\t\t\t\t\t<button className={\"yellow\"} onClick={this.setColor}>Yellow</button>\n\t\t\t\t\t<button className={\"orange\"} onClick={this.setColor}>Orange</button>\n\t\t\t\t\t<button className={\"black\"} onClick={this.setColor}>Black</button>\n\t\t\t\t\t<button className={\"white\"} onClick={this.setColor}>White</button>\n\t\t\t\t\t<button className={\"eraser\"} onClick={() => this.drawMode = \"eraser\"}>Eraser</button>\n\t\t\t\t\t<select onChange={e => this.lineWidth = e.target.value}>\n\t\t\t\t\t\t<option value={\"2\"}>2</option>\n\t\t\t\t\t\t<option value={\"10\"} selected={true}>10</option>\n\t\t\t\t\t\t<option value={\"20\"}>20</option>\n\t\t\t\t\t</select>\n\t\t\t\t\t<button className={\"clear\"} onClick={this.resetCanvas}>Reset</button>\n\t\t\t\t\t<button className={\"send\"} onClick={this.sendImage}>Send</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React, {Component} from \"react\";\nimport \"./NoteSection.css\";\nimport Storage from \"../Services/Storage\";\n\nexport default class NoteSection extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tvalue: Storage.getItem(\"note\")\n\t\t};\n\t\tthis.onSaveText = this.onSaveText.bind(this);\n\t\tthis.onClearText = this.onClearText.bind(this);\n\t}\n\n\tsetText() {\n\t\tconst {value} = this.content;\n\t\tthis.setState({value});\n\t}\n\n\tonSaveText(e) {\n\t\tconst {value} = this.content;\n\t\tStorage.save(\"note\", value);\n\t}\n\n\tonClearText(e) {\n\t\tthis.content.value = \"\"\n\t}\n\n\trender() {\n\t\tconst {value} = this.state;\n\t\treturn (\n\t\t\t<div className={\"note-section\"}>\n\t\t\t\t<label>Note</label>\n\t\t\t\t<textarea value={value} onInput={this.setText} ref={ref => this.content = ref}/>\n\t\t\t\t<div className={\"actions\"}>\n\t\t\t\t\t<button className={\"clear\"} onClick={this.onClearText}>Clear</button>\n\t\t\t\t\t<button className={\"save\"} onClick={this.onSaveText}>Save</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React, {Component} from \"react\";\nimport MapLayer from \"../MapLayer/MapLayer\";\nimport BaldursGateMaps from \"../BaldursGateMaps/BaldursGateMaps\";\nimport FreeDraw from \"../FreeDraw/FreeDraw\";\nimport NoteSection from \"../NoteSection/NoteSection\";\nimport Services from \"../Services/Services\";\n\nexport default class PanelCenter extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.onSendImage = this.onSendImage.bind(this);\n\t\tthis.onMapSelected = this.onMapSelected.bind(this);\n\t}\n\n\tonSendImage(image) {\n\t\tthis.props.onSendImage && this.props.onSendImage(image);\n\t}\n\n\tonMapSelected(image) {\n\t\tthis.props.onMapSelected && this.props.onMapSelected(image);\n\t}\n\n\trender() {\n\t\tconst {user, sourceImage, sourceAlt, masterTool} = this.props;\n\t\treturn (\n\t\t\t<div className={\"panel panel-center\"}>\n\t\t\t\t{user.type === \"master\" ?\n\t\t\t\t\t<div className={\"master-tools\"}>\n\t\t\t\t\t\t{sourceImage ?\n\t\t\t\t\t\t\t<MapLayer image={sourceImage} alt={sourceAlt} onSendImage={this.onSendImage}/> : null}\n\t\t\t\t\t\t{masterTool === \"baldursFateMaps\" ?\n\t\t\t\t\t\t\t<BaldursGateMaps onMapSelected={this.onMapSelected}/> : null}\n\t\t\t\t\t\t{masterTool === \"freeDraw\" ?\n\t\t\t\t\t\t\t<FreeDraw onSendImage={this.onSendImage}/> : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t: null}\n\t\t\t\t{user.type === \"player\" ?\n\t\t\t\t\t<div className={\"player-tools\"}>\n\t\t\t\t\t\t<FreeDraw onSendImage={this.onSendImage}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t: null}\n\t\t\t\t<NoteSection/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import UserSection from \"../UserSection/UserSection\";\nimport React, {Component} from \"react\";\n\nexport default class PanelRight extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.onClickImage = this.onClickImage.bind(this);\n\t}\n\n\tonClickImage() {\n\t\tthis.props.onClickImage && this.props.onClickImage();\n\t}\n\n\trender() {\n\t\tconst {user, users, enlargePanelRight} = this.props;\n\t\treturn (\n\t\t\t<div className={`panel panel-right ${enlargePanelRight}`}>\n\t\t\t\t{users.map(u => u.id !== user.id ?\n\t\t\t\t\t<UserSection user={u} onClickImage={this.onClickImage}/>\n\t\t\t\t\t: null)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, {Component} from \"react\";\nimport \"./Home.css\";\nimport Login from \"../Login/Login\";\nimport Storage from \"../Services/Storage\";\nimport Logger from \"../Services/Logger\";\nimport UploadFileButton from \"../UploadFileButton/UploadFileButton\";\nimport UserSection from \"../UserSection/UserSection\";\nimport Services from \"../Services/Services\";\nimport PanelLeft from \"../PanelLeft/PanelLeft\";\nimport PanelCenter from \"../PanelCenter/PanelCenter\";\nimport PanelRight from \"../PanelRight/PanelRight\";\n\nexport default class Home extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.logger = new Logger(\"Home\");\n\n\t\tthis.state = {\n\t\t\tuser: Storage.getItem(\"user\", sessionStorage),\n\t\t\tusers: [],\n\t\t\tenlargePanelRight: \"\"\n\t\t};\n\n\t\tthis.onLoginSuccess = this.onLoginSuccess.bind(this);\n\t\tthis.onLogoutSuccess = this.onLogoutSuccess.bind(this);\n\t\tthis.sendRoll = this.sendRoll.bind(this);\n\t\tthis.uploadImage = this.uploadImage.bind(this);\n\t\tthis.setBaseMap = this.setBaseMap.bind(this);\n\t\tthis.togglePanelRight = this.togglePanelRight.bind(this);\n\t\tthis.updateUsers = this.updateUsers.bind(this);\n\n\t\tServices.init();\n\t}\n\n\tcomponentDidMount() {\n\t\tServices.onImage(data => {\n\t\t\tthis.logger.log(\"Received remote image from user\", data.user);\n\t\t\tconst {users} = this.state;\n\t\t\tusers.find(user => user.id === data.user.id).image = data.image;\n\t\t\tthis.setState({users});\n\t\t});\n\t\tServices.onJoin(users => this.updateUsers(users));\n\t\tServices.onLeave(users => this.updateUsers(users));\n\t\tServices.onRoll(users => this.updateUsers(users));\n\t\tif (this.state.user) {\n\t\t\tServices.publish(\"login\", this.state.user);\n\t\t}\n\t}\n\n\tupdateUsers(users) {\n\t\tthis.logger.log(\"Updating users...\", users);\n\t\tthis.setState({users})\n\t}\n\n\tsendRoll(roll) {\n\t\tconst {user} = this.state;\n\t\tuser.rolls = user.rolls || [];\n\t\tuser.rolls.splice(0, 0, roll);\n\t\tthis.logger.log(\"Sending roll\", roll, user);\n\t\tthis.setState({user});\n\t\tconst {id} = user;\n\t\tServices.publish(\"roll\", {id, rolls: user.rolls});\n\t}\n\n\t/**\n\t * onLoginSuccess\n\t * @param user: {type: \"master|player\", id: \"[username]\"}\n\t */\n\tonLoginSuccess(user) {\n\t\tStorage.save(\"user\", user, sessionStorage);\n\t\tServices.publish(\"login\", user);\n\t\tthis.setState({user});\n\t}\n\n\tonLogoutSuccess() {\n\t\tStorage.remove(\"user\", sessionStorage);\n\t\tServices.publish(\"logout\", this.state.user);\n\t\tthis.setState({user: null});\n\t}\n\n\tuploadImage(image) {\n\t\tthis.logger.log(\"Uploading image...\");\n\t\tServices.publish(\"upload\", {\n\t\t\timage: image,\n\t\t\tuser: this.state.user\n\t\t});\n\t}\n\n\tsetBaseMap(image) {\n\t\tthis.setState({sourceImage: image.src, sourceAlt: image.alt})\n\t}\n\n\ttogglePanelRight() {\n\t\tthis.setState({\n\t\t\tenlargePanelRight: !this.state.enlargePanelRight ? \"big\" : \"\"\n\t\t})\n\t}\n\n\trender() {\n\t\tconst {sourceImage, sourceAlt, user, users, masterTool, enlargePanelRight} = this.state;\n\t\tthis.logger.log(\"Users\", users);\n\t\treturn (\n\t\t\t<div className={\"home\"}>\n\t\t\t\t<div className={`header header-${user ? \"logout\" : \"login\"}`}>\n\t\t\t\t\t<Login user={user} onLoginSuccess={this.onLoginSuccess} onLogoutSuccess={this.onLogoutSuccess}/>\n\t\t\t\t\t{user && user.type === \"master\" ?\n\t\t\t\t\t\t<div className={\"master-tools\"}>\n\t\t\t\t\t\t\t<button onClick={() => this.setState({masterTool: \"baldursFateMaps\"})}>Baldur's Gate</button>\n\t\t\t\t\t\t\t<button onClick={() => this.setState({masterTool: \"freeDraw\", sourceImage: null})}>Free Draw</button>\n\t\t\t\t\t\t\t<UploadFileButton onChange={this.setBaseMap}>Upload</UploadFileButton>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t{user ?\n\t\t\t\t\t<div className={\"container\"}>\n\t\t\t\t\t\t<PanelLeft user={user} onRoll={this.sendRoll}/>\n\t\t\t\t\t\t<PanelCenter user={user} sourceImage={sourceImage} sourceAlt={sourceAlt} masterTool={masterTool} onMapSelected={this.setBaseMap} onSendImage={this.uploadImage}/>\n\t\t\t\t\t\t<PanelRight user={user} users={users} enlargePanelRight={enlargePanelRight} onClickImage={this.togglePanelRight}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t: null}\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React, {Component} from 'react';\nimport './App.css';\nimport Logger from \"./components/Services/Logger\";\nimport Home from \"./components/Home/Home\";\n\nexport default class App extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.logger = new Logger(\"App\");\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"App\">\n\t\t\t\t<Home/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached extra has been fetched,\n              // but the previous service worker will still serve the older\n              // extra until all client tabs are closed.\n              console.log(\n                'New extra is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}